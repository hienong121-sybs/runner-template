# =========================================================
# runner-template env example
# =========================================================
# This file is a reference for required variables.
# Real secrets must be stored in:
# - GitHub Actions secrets
# - Azure Pipelines secret variables / variable groups

# Required: dotenvrtdb endpoint used in CI step `create-env-file`.
DOTENVRTDB_URL=https://your-dotenvrtdb-endpoint

# ---------------------------------------------------------
# Cloudflare tunnel env vars used by `runner-template-createtunnel`
# ---------------------------------------------------------
# Preferred tunnel name key (no suffix):
CLOUDFLARED_TUNNEL_NAME=

# Add many domains with suffixes (00, 01, 02...).
CLOUDFLARED_TUNNEL_DOMAIN_00=
CLOUDFLARED_TUNNEL_DOMAIN_01=
CLOUDFLARED_TUNNEL_DOMAIN_02=

# If a hostname starts with `ssh`, service will map to:
# ssh://127.0.0.1:${SSH_PORT}
SSH_PORT=2222

# ---------------------------------------------------------
# Caddy HTTP origin gateway + Nginx business proxy env vars
# ---------------------------------------------------------
# Caddy now runs as plain HTTP origin behind Cloudflare Tunnel.
# HTTPS/TLS is terminated by Cloudflare edge.

# Upstream app target for Nginx main traffic.
MAIN_URL=127.0.0.1
MAIN_PORT=3000
NGINX_PORT=8080

# Tailscale DNS nodes for mirror topology (same Nginx port on each runner).
TAILSCALE_DNS_CURRENT=
TAILSCALE_DNS_NEXTHOUR=

# Mirror control:
# - MIRROR_ENABLED=1 to enable mirror subrequest.
# - MIRROR_TARGET_DNS defaults to TAILSCALE_DNS_NEXTHOUR when empty.
# - MIRROR_TARGET_PORT defaults to NGINX_PORT.
MIRROR_ENABLED=1
MIRROR_TARGET_DNS=
MIRROR_TARGET_PORT=8080

# Container-level DNS setup for host/service network modes.
# Keep DNS_SETUP_ENABLED=1 to write /etc/resolv.conf at container startup.
DNS_SETUP_ENABLED=1
DNS_NAMESERVER_PRIMARY=100.100.100.100
DNS_NAMESERVER_FALLBACK=1.1.1.1
DNS_SEARCH_DOMAIN=

# /files basic auth users (optional, can define many *_00, *_01, ... pairs).
NGINX_AUTH_USER_00=
NGINX_AUTH_PASS_00=
NGINX_AUTH_USER_01=
NGINX_AUTH_PASS_01=

# ---------------------------------------------------------
# Pull-data env vars used by docker compose service `pull-data`
# ---------------------------------------------------------
# Comma-separated directories to sync from remote cwd.
PULL_DATA_SYNC_DIRS=.pocketbase

# ---------------------------------------------------------
# Tailscale Access Controls env vars used by `runner-template-tailscale`
# ---------------------------------------------------------
# Auth option 1: OAuth client credentials (TS_* aliases are also supported)
TAILSCALE_CLIENT_ID=
TAILSCALE_CLIENT_SECRET=

# Auth option 2: pre-generated access token
TAILSCALE_ACCESS_TOKEN=

# Optional: tailnet slug/domain for endpoint /tailnet/{tailnet}/acl
# Use "-" for current/default tailnet.
TAILSCALE_TAILNET=-

# Optional: custom ACL hujson path (relative to cwd or absolute).
TAILSCALE_ACL_BODY_FILE=./tailscale/access-controls.hujson

# Optional: OAuth scope + API request tuning.
TAILSCALE_OAUTH_SCOPE=
TAILSCALE_API_BASE_URL=https://api.tailscale.com
TAILSCALE_API_TIMEOUT_MS=30000

# ---------------------------------------------------------
# Keys expected to exist in DotenvRTDB storage
# ---------------------------------------------------------
# Raw JSON content, written to ./cloudflared-credentials.json
CLOUDFLARED_CREDENTIALS_JSON_BASE64=
# Base64 encoded YAML, written to ./cloudflared-config.yml
CLOUDFLARED_CONFIG_YML_BASE64=

# Base64 encoded YAML, written to ./docker-compose.yml
DOCKER_COMPOSE_YML_BASE64=

# ---------------------------------------------------------
# Optional examples
# ---------------------------------------------------------
APP_ENV=dev
REGION=ap-southeast-1

# Runner keep-alive sample values (if needed by your app scripts)
RUNNER_KEEP_ALIVE_INTERVAL=60
RUNNER_KEEP_ALIVE_SERVICES=docker
