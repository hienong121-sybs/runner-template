# Codex Changelog - 2026-02-12 - #08

## 1) Yeu cau thay doi
- [x] Dua `shadow-servers` ve runtime mount host cung logic voi cac runtime nginx files de de quan ly.
- [x] Ra soat cac file lien quan de dam bao path runtime thong nhat, khong vo flow dang chay.

## 2) Cau hinh/env anh huong
- Khong them env moi.
- Khong doi container runtime path:
  - Nginx van doc shadow peers tai `/etc/nginx/shadow-servers`.
  - Docker-manager van ghi shadow peers tai `/opt/nginx/shadow-servers`.
- Chi doi host bind-mount sang runtime path:
  - `./.nginx/runtime/shadow-servers`.

## 3) Tom tat thay doi
- Chuan hoa host-side shadow backend path tu `nginx/shadow-servers` sang `./.nginx/runtime/shadow-servers`.
- Bo sung `.gitkeep` tai runtime path de template copy tao san thu muc quan ly.
- Dong bo toan bo tai lieu/checklist/copy list theo path moi.

## 4) Chi tiet thay doi
- `docker-compose.yml`
  - Doi bind-mount cua `nginx`:
    - `./nginx/shadow-servers:/etc/nginx/shadow-servers`
    - -> `./.nginx/runtime/shadow-servers:/etc/nginx/shadow-servers`
  - Doi bind-mount cua `docker-manager`:
    - `./nginx/shadow-servers:/opt/nginx/shadow-servers`
    - -> `./.nginx/runtime/shadow-servers:/opt/nginx/shadow-servers`
- `.gitignore`
  - Them rule unignore co kiem soat cho duy nhat file:
    - `./.nginx/runtime/shadow-servers/.gitkeep`
  - Van giu `.nginx` runtime outputs/logs o trang thai ignore.
- `runner-template-copy.js`
  - Doi file seed copy:
    - `nginx/shadow-servers/.gitkeep`
    - -> `.nginx/runtime/shadow-servers/.gitkeep`
- `package.json`
  - Doi publish include:
    - `nginx/shadow-servers/.gitkeep`
    - -> `.nginx/runtime/shadow-servers/.gitkeep`
- `.env.example`
  - Cap nhat comment host path shadow upstream list ve runtime path moi.
- `README.md`
  - Dong bo huong dan/file list/runtime map/checklist sang `./.nginx/runtime/shadow-servers`.
- `bugs/shadow-check.md`
  - Dong bo lenh/checklist kiem tra shadow file theo runtime path moi.
  - Bo sung hien thi thu muc runtime `shadow-servers` o muc kiem tra host.
- `CHANGELOG.md`
  - Cap nhat muc Unreleased de phan anh shadow runtime path mount moi.
- Them file:
  - `.nginx/runtime/shadow-servers/.gitkeep`
- Xoa file cu:
  - `nginx/shadow-servers/.gitkeep`

## 5) Git diff trong tam
```diff
diff --git a/docker-compose.yml b/docker-compose.yml
@@
-      - ./nginx/shadow-servers:/etc/nginx/shadow-servers
+      - ./.nginx/runtime/shadow-servers:/etc/nginx/shadow-servers
@@
-      - ./nginx/shadow-servers:/opt/nginx/shadow-servers
+      - ./.nginx/runtime/shadow-servers:/opt/nginx/shadow-servers
```

## 6) Verify da chay
- Khong chay test/lint theo dung yeu cau.
- Da verify thu cong:
  - Tat ca tham chieu host path `nginx/shadow-servers` trong file van hanh/chinh sua da doi ve `./.nginx/runtime/shadow-servers`.
  - Runtime path trong container (`/etc/nginx/shadow-servers`) va logic scripts nginx khong doi.
  - Docker-manager env `DOCKER_MANAGER_SHADOW_DIR` va duong dan trong container khong doi.

## 7) Commit message de xuat
```text
chore(nginx): move shadow-servers host mount to runtime path and align docs
```
